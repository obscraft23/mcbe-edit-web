<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>{% block title %}{% endblock %}</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.2/css/all.css" integrity="sha384-/rXc/GQVaYpyDdyxK+ecHPVYJSN9bmVFBvjA/9eOB+pb3F2w2N6fc5qB9Ew5yIns" crossorigin="anonymous">

</head>
<body>

{% block content %}
<div class="container-fluid">
<div class="page-header">
  <h1>Minecraft Bedrock World Edit <small class="text-muted">version 0.0.1</small></h1>
</div>
<p></p>
<h4>Upload world folder</h4>

<form method='POST' name ="upload" enctype="multipart/form-data">
    {% csrf_token %}
    <input type="file" class="btn btn-light" id="file_input" name="file_field" webkitdirectory directory/>
    <p></p>
    <input type="text" id="directories" name="directories" hidden />
    
    <button id="btn" class="btn btn-primary">send</button>
    
</form>
</div>
<script>
 var btn = document.getElementById('btn');
 files = document.querySelector("#file_input").files;
 //document.querySelector("#file_input").addEventListener("change", function() {
 btn.addEventListener('click', function() {
    files = document.querySelector("#file_input").files;
    var directories = {}
    for (var file of files) {
      file.webkitRelativePath
      directories[file.name] = file.webkitRelativePath
    }
    directories = JSON.stringify(directories);
    document.querySelector("#directories").value = directories
    document.upload.submit();
 });
</script>
{% endblock %}

</body>
</html>